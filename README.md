<div class="alert" style="background-color:#fff; color:black; padding:0px 10px; border-radius:5px;"><h1 style='margin:15px 15px; color:#006a79; font-size:40px'> Customer Life Time Value - case study for Marketing and Sales</h1>
</div>
<div style="text-align: center">
</div>
<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>Motivation</h2>
</div>

Every business cares about their customers. They want to have more of them. They want customers to spend more of their time and money with them, to build good relationship with their customers.

However, the resources are limited.

It takes effort and money for businesses to run ad-campaigns, to sustain an effective marketing team so as to resolve problems when potential and existing customers reach out to them.

So, businesses want to know more who is a more valuable customer.

Who is more valuable?: 

(i) a customer who made a `$1000` purchase 6 months back?  
(ii) a customer who made 10 small purchases last month?


It turns out customers who make small yet repeated purchases can be more valuable in the long run. So, it's a good idea for your marketing teams to focus on high value customers. 

But how to you quantify which customers are more valuable?

Using Customer Lifetime Value (CLTV)

The businesses who shine out of the crowd, are those who manage to retain their customers!

<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>1. What is CLTV</h2>
</div>


CLV is an abbreviation for Customer Lifetime Value.Customer lifetime value (CLV, or CLTV) is the metric that indicates _the total revenue a business can reasonably expect from a single customer account throughout the business relationship_.

It is one of the most important metrics to measure at any growing company. Businesses use customer lifetime value to identify customer segments that are most valuable to the company. The longer a customer continues to purchase from a company, the greater their lifetime value becomes.

Customer lifetime value (CLV) can help you to answers the most important questions about sales to every company:

__How can CLTV Modeling help?__

It can help answer the following questions:

1. Which customers are still your customers?

2. Which customer(s) will buy from you in the next time duration?

3. How much each customer going to buy from you in the future?

4. Identify the most profitable customers - Who are the top N customers expected to order again in next period?

5. Determine how much to invest in acquiring customers?

6. How to segment the most profitable customers.

7. Identify the traits and features of high value customers

8. Determine how to allocate resources amongst customers
 
9. How can a company offer better, profitable product and make the most money?


<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>2. What is Customer Acquistion Cost ( CAC)?</h2>
</div>

The amount the business spends to acquire every customer is the Customer Acquisition Cost (CAC). It can be the expense incurred to both acquire them and to maintain them, calculated for predetermined durations (say a year).

Calculating CAC is calculated by _dividing your overall marketing expenses by the number of net new customers acquired in a given period of time_. 

CAC refers to both the resources and costs incurred to acquire an additional customer. Customer acquisition cost is a key business metric that is commonly used alongside the customer lifetime value (LTV) metric to measure value generated by a new customer.

Typically, the CAC for a given period is the total of all promotional costs divided by the number of new customers acquired. 

The actual acquisition cost can vary with the nature of business, some of the common components of acquisition cost are:
 - Paid per click advertising cost
 - TV Ads
 - Posters, Banner Ads
 - Paid sales and marketing staff
 - Social media campaigns (collecting emails, phone numbers etc)
 - Magazine, Journal and Newspaper ads
 - Mailers
 
The key is to include everything needed, including digital and non-digital medium, to acquire a new customer.

It's quite easy to compute an aggregate value.

Let's say your company spends `$`100k on sales and `$`70k on marketing. Through this the company acquired 400 new customers for the financial year. Then, the CAC would be: (100k+70k)/400 = `$`425 per customer.


__Why calculating the acquisition cost matters?__

Because you don't want to spend more than what you can possibly hope to earn from your customers over lifetime. 


## Why should businesses focus on CLV:CAC relationship


The Customer Lifetime Value to Customer Acquisition Ratio (CLV:CAC) measures the relationship between the lifetime value of a customer and the cost of acquiring that customer. It tracks the relationship between what a company pays to get a first-time buyer and how much that customer is likely to spend over time. 

__How does it matter?__

Typically, for a successful business, CLV:CAC ratio should be high.

A CLV:CAC of one to one (i.e., 1:1) tells you that your company is failing. With this ratio, ecommerce growth can only be achieved with significant investment, and you should not expect to earn much profit.

On the other hand, a CLV:CAC ratio of three-to-one or higher indicates that your company is building value. Investing in your business should lead to profitable growth.

There are limits, too. If the CLV:CAC ratio is too high, say 25:1, you are investing too little and may be vulnerable to competition.


<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>3. How is CLTV Calculated?</h2>
</div>



First let us get started by understanding some commonly used terminologies.

1. __Average Order Value(AOV):__ The Average Order value is the ratio of your total revenue and the total number of orders. AOV represents the mean amount of revenue that the customer spends on an order.

       Average Order Value = Total Revenue / Total Number of Orders


2. __Purchase Frequency(PF):__ Purchase Frequency is the ratio of the total number of orders and the total number of customer. It represents the average number of orders placed by each customer.

       Purchase Frequency =  Total Number of Orders / Total Number of Customers


3. __Churn Rate:__ Churn Rate is the percentage of customers who ceased to be a customer.

For example: 

       Churn Rate = (Customers at the start of period - Customers at end of period) / Customers at start of period.


4. __Customer Lifespan:__ Customer Lifetime is the period of time that the customer has been continuously ordering.

      Average Customer Lifespan = Sum of customer lifespans / Number of Customers


* If the business is relatively new and lacks a good sample size for customers, then lifespan can be approximated as follows:

     
      Customer Lifespan = 1 / Churn Rate


5. __Repeat Rate:__ Repeat rate can be defined as the ratio of the number of customers with more than one order to the number of unique customers. Example: If you have 10 customers in a month out of who 4 come back, your repeat rate is 40%.

                               
      Churn Rate= 1-Repeat Rate



## Formula


    CLTV = ((Average Order Value x Purchase Frequency * Average Life span)
    
For example:

For a subscription business, if avg. order value is $100 and a customer buy 3 times on an average (purchase freq) over a period of 5 years (avg life span). 

Then,

    CLTV = 100 * 3 * 5 = $1500
    
    
<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>4. Alternate Formula for CLTV Calculation</h2>
</div> 

1. When life span is not known for your business type, replace it with `1 / churnrate`.

       CLTV = ((Average Order Value x Purchase Frequency)/Churn Rate)
    
__Example:__ For a subscription based business (say, book rentals) IF the avg order value is `$`100 and a customer buys 3 times a year on an average. We dont know their lifespan but we know 20 percent of subscribers don't renew membership. 

Then, 

       CLTV = 100 * 3 / .2 = 1500

If the business was able to successfully reduce the churn rate from 20% to 10% then, the CLTV would double to $3000 in revenue. Stunning!

Note: Dont include the new acquired customers in above formula.


2. When you care about the profit and not the revenue, multiply it with profit margin.

       CLTV = ((Average Order Value x Purchase Frequency)/Churn Rate) x Gross Profit margin
    
    where, 
    
       Gross margin = [(Total revenue - COGS)/Total Revenue] * 100 
  
__Example:__  Suppose the gross margin in the previous example was say 30%, then the CLTV would be calculated as: 1500 * .3 = $450.
  
3. When your customers stay several years, then you need to account for the depreciation due to inflation (time value of money). Assuming margin and retention rates are constant:

       CLV Formula = Gross margin contribution per customer * [R / (1 + D - R)]

where,
       Gross Margin Contribution per Customer = Gross margin * Avg total revenue per customer.
       
__Example:__ Say Gross margin is 30%, Avg revenue per customer per year = $100, Retention rate per year = 10% and Discount rate is 10% taken as default. Then,

CLTV = .3 *100 * (.9 / (1 + .1 - .9)) = $135


4. Factoring in the retention costs year on year

<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>5. Business Contexts where CLTV can be applied</h2>
</div> 

The business contexts on which CLTV may be applied may be classified based on 2 factors:

__1. Contractual vs Non-Contractual__

--> Depends on whether there is a predetermined contract perdiod before you use the product / service. 

__Examples for Contractual models:__ 
- Club memberships
- Magazine subscriptions
- Credit cards

__Example for Non-Contractualmodels:__ 
- Grocery stores
- e-Commerce shopping like Amazon
- Doctor visits

If purchase is within a contract, the customer churn is __explicitly known__.


__2. Continuous vs Discrete Purchases__

--> Depends on whether the puchase happens contunuously or at specific times / opportunity. Purchases can be with or without a contract

__Examples of continuous purchases:__ 
- Grocery
- Book rentals
- Hospital visits

__Examples of discrete purchases:__ 
- Public Events
- Club memberships
- Insurance policies
- Mobile phone plans


__Q:__ What category the following products would fall in?

1. Netflix 
2. Doordash / Swiggy / Zomato
3. Amazon.com
4. Mastercard Credit card
5. Hospital appointments


<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>6. Modeling Approaches for CLV</h2>
</div>



There are lots of approaches available for calculating CLTV.  

__1.__ The historical data of customers can be used to calculate CLV. This is the oldest method, where we calculate average revenue obtained from all customers. This provides a _single value to denote the lifetime value_. This can also be computed at individual _customer level_.

__2.__ An improved solution to this is introduce _cohorts_ and calculate the revenue for each cohort. But in these methods, there is a glaring disadvantage. We are unable to calculate the CLV for new customers.

__3.__ Machine Learning based approach can solve this. Statistical models can be built with help of available data.

   For example, Take recent six-month data as independent variables and total revenue over three years as a dependent variable and build a regression model on this data.

__4.__ There is also a probabilistic approach for calculating CLV. We can calculate our RFM(Recency, Frequency, Monetary) from the data available. This table can be used to extract CLV. Probabilistic models like __BG/NBD__ and __Gamma-Gamma__ can be used here.

We can group customers into cohorts or segments based on the value to business using K means algorithm. After this, specific promotions , discounts, can be provided to focus on high value groups.


<div class="alert alert-info" style="background-color:#006a79; color:white; padding:0px 10px; border-radius:5px;"><h2 style='margin:10px 5px'>7. Problem Statement</h2>
</div>


The aim here is to understand the different values of calculating customer value through practical examples.

We will be working with __Brazilian E-Commerce__ Dataset by Olist. 

This dataset was generously provided by Olist, the largest department store in Brazilian marketplaces. Olist connects small businesses from all over Brazil to channels without hassle and with a single contract. The dataset has information of 100k orders from 2016 to 2018 made at multiple marketplaces in Brazil. Its features allows viewing an order from multiple dimensions: from order status, price, payment and freight performance to customer location, product attributes.

This is real commercial data, anonymised.

We will start by understanding the data we have, about the different attributes in depth. You'll learn how to clean and pre-process the data. Next, we will understand the relationship between features through Explorartory data analysis. You'll learn how to generate the RFM matrix from the given data, how to apply probablistic models to generate CLV, how to use kmeans and cluster the customers into different segments on the basis of lifetime value 


